function autoPlay(){var s=jQuery(settings.datesDiv).find("a."+settings.datesSelectedClass);"forward"==settings.autoPlayDirection?s.parent().is("li:last-child")?jQuery(settings.datesDiv+" li:first-child").find("a").trigger("click"):s.parent().next().find("a").trigger("click"):"backward"==settings.autoPlayDirection&&(s.parent().is("li:first-child")?jQuery(settings.datesDiv+" li:last-child").find("a").trigger("click"):s.parent().prev().find("a").trigger("click"))}function updateSize(){var t=parseInt(jQuery(".issues li").eq(0).css("height"));jQuery(settings.issuesDiv+" li").each(function(){"vertical"==settings.orientation&&jQuery(settings.issuesDiv+" li").css("width",jQuery(settings.containerDiv).width()-jQuery(settings.datesDiv).width());var s=parseInt(jQuery(this).css("height"));t=s<=t?t:s}),jQuery(settings.issuesDiv+" li").css("height",+t+50+"px"),"vertical"==settings.orientation?jQuery(settings.containerDiv).css("height",+t+50+"px"):jQuery(settings.containerDiv).css("height",+t+100+jQuery(settings.datesDiv).height()+"px")}jQuery.fn.timelinr=function(v){settings=jQuery.extend({orientation:"horizontal",containerDiv:"#timeline-1",datesDiv:v.containerDiv+" .dates",datesSelectedClass:"selected",datesSpeed:"normal",issuesDiv:v.containerDiv+" .issues",issuesSelectedClass:"selected",issuesSpeed:"normal",issuesTransparency:.2,issuesTransparencySpeed:500,prevButton:v.containerDiv+" .prev",nextButton:v.containerDiv+" .next",arrowKeys:"true",startAt:1,autoPlay:"false",autoPlayDirection:"forward",autoPlayPause:3e3,fixedSize:"true"},v),jQuery(function(){var s=jQuery(v.containerDiv),t="",e=jQuery(s).find("ul.issues");if(t+="<ul class='dates'>",jQuery(e).find("li").each(function(s){jQuery(this).attr("name").match("^__")?t+="<li><a href='#"+jQuery(this).attr("name")+'\'><span class="sr-only">'+jQuery(this).attr("name")+"</span>&nbsp;&nbsp;&nbsp;&nbsp;</a></li>":t+="<li><a href='#1"+jQuery(this).attr("name")+"'>"+jQuery(this).data("date")+"</a></li>"}),t+="</ul>",jQuery(s).prepend(t),0<jQuery(settings.datesDiv).length&&0<jQuery(settings.issuesDiv).length){"true"==v.fixedSize&&updateSize();var a=jQuery(settings.datesDiv+" li").length,r=jQuery(settings.issuesDiv+" li").length,i=(jQuery(settings.datesDiv).find("a."+settings.datesSelectedClass),jQuery(settings.issuesDiv).find("li."+settings.issuesSelectedClass),jQuery(settings.containerDiv).width()),u=(jQuery(settings.containerDiv).height(),jQuery(settings.issuesDiv).width(),jQuery(settings.issuesDiv).height(),jQuery(settings.issuesDiv+" li").width()),g=jQuery(settings.issuesDiv+" li").height(),n=jQuery(settings.datesDiv).width(),l=(jQuery(settings.datesDiv).height(),jQuery(settings.datesDiv+" li").width()),d=jQuery(settings.datesDiv+" li").height(),y=jQuery(settings.issuesDiv).find("li."+settings.issuesSelectedClass).index(),o=jQuery(settings.datesDiv+" li").eq(y).find("a").attr("href"),c=jQuery(settings.datesDiv+" li").eq(y+2).find("a").attr("href");if("horizontal"==settings.orientation){jQuery(settings.issuesDiv).find("li").width(i),jQuery(settings.issuesDiv).width(u*r),jQuery(settings.datesDiv).width(l*a).css("marginLeft",i/2-l/2);var j=parseInt(jQuery(settings.datesDiv).css("marginLeft").substring(0,jQuery(settings.datesDiv).css("marginLeft").indexOf("px")))}else if("vertical"==settings.orientation){g=+g+100,jQuery(settings.issuesDiv).find("li").width(i-n),jQuery(settings.issuesDiv).height(g*r),jQuery(settings.datesDiv).height(d*a).css("marginTop",d);j=parseInt(jQuery(settings.datesDiv).css("marginTop").substring(0,jQuery(settings.datesDiv).css("marginTop").indexOf("px")))}o=jQuery(settings.datesDiv+" li").eq(settings.startAt-2).find("a").attr("href"),c=jQuery(settings.datesDiv+" li").eq(settings.startAt).find("a").attr("href");if(jQuery(settings.prevButton).attr("href",o),jQuery(settings.nextButton).attr("href",c),jQuery(settings.datesDiv+" a").click(function(s){jQuery(this).text();var t=jQuery(this).parent().prevAll().length;"horizontal"==settings.orientation?jQuery(settings.issuesDiv).animate({marginLeft:-u*t},{queue:!1,duration:settings.issuesSpeed}):"vertical"==settings.orientation&&jQuery(settings.issuesDiv).animate({marginTop:-g*t},{queue:!1,duration:settings.issuesSpeed}),jQuery(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}).removeClass(settings.issuesSelectedClass).eq(t).addClass(settings.issuesSelectedClass).fadeTo(settings.issuesTransparencySpeed,1),1==a?jQuery(settings.prevButton+","+settings.nextButton).fadeOut("fast"):2==a?jQuery(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?(jQuery(settings.prevButton).fadeOut("fast"),jQuery(settings.nextButton).fadeIn("fast")):jQuery(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)&&(jQuery(settings.nextButton).fadeOut("fast"),jQuery(settings.prevButton).fadeIn("fast")):jQuery(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?(jQuery(settings.nextButton).fadeIn("fast"),jQuery(settings.prevButton).fadeOut("fast")):jQuery(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?(jQuery(settings.prevButton).fadeIn("fast"),jQuery(settings.nextButton).fadeOut("fast")):jQuery(settings.nextButton+","+settings.prevButton).fadeIn("slow"),jQuery(settings.datesDiv+" a").removeClass(settings.datesSelectedClass),jQuery(this).addClass(settings.datesSelectedClass),"horizontal"==settings.orientation?jQuery(settings.datesDiv).animate({marginLeft:j-l*t},{queue:!1,duration:"settings.datesSpeed"}):"vertical"==settings.orientation&&jQuery(settings.datesDiv).animate({marginTop:j-d*t},{queue:!1,duration:"settings.datesSpeed"});var e=jQuery(settings.datesDiv+" li").eq(t-1).find("a").attr("href"),i=jQuery(settings.datesDiv+" li").eq(t+1).find("a").attr("href");jQuery(settings.prevButton).attr("href",e),jQuery(settings.nextButton).attr("href",i)}),jQuery(settings.nextButton).bind("click",function(s){var t=jQuery(settings.issuesDiv).find("li."+settings.issuesSelectedClass).index(),e=jQuery(settings.datesDiv+" li").eq(t).find("a").attr("href"),i=jQuery(settings.datesDiv+" li").eq(t+2).find("a").attr("href");if("horizontal"==settings.orientation){n=parseInt(jQuery(settings.issuesDiv).css("marginLeft").substring(0,jQuery(settings.issuesDiv).css("marginLeft").indexOf("px"))),parseInt(jQuery(settings.datesDiv).css("marginLeft").substring(0,jQuery(settings.datesDiv).css("marginLeft").indexOf("px")));n<=-(u*r-u)?(jQuery(settings.issuesDiv).stop(),jQuery(settings.datesDiv+" li:last-child a").click()):jQuery(settings.issuesDiv).is(":animated")||(jQuery(settings.datesDiv+" li").eq(t+1).find("a").trigger("click"),console.log(t,e,i),jQuery(settings.prevButton).attr("href",e),jQuery(settings.nextButton).attr("href",i))}else if("vertical"==settings.orientation){var n;n=parseInt(jQuery(settings.issuesDiv).css("marginTop").substring(0,jQuery(settings.issuesDiv).css("marginTop").indexOf("px"))),parseInt(jQuery(settings.datesDiv).css("marginTop").substring(0,jQuery(settings.datesDiv).css("marginTop").indexOf("px")));n<=-(g*r-g)?(jQuery(settings.issuesDiv).stop(),jQuery(settings.datesDiv+" li:last-child a").click()):jQuery(settings.issuesDiv).is(":animated")||(jQuery(settings.prevButton).attr("href",e),jQuery(settings.nextButton).attr("href",i),jQuery(settings.datesDiv+" li").eq(t+1).find("a").trigger("click"))}1==a?jQuery(settings.prevButton+","+settings.nextButton).fadeOut("fast"):2==a?jQuery(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?(jQuery(settings.prevButton).fadeOut("fast"),jQuery(settings.nextButton).fadeIn("fast")):jQuery(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)&&(jQuery(settings.nextButton).fadeOut("fast"),jQuery(settings.prevButton).fadeIn("fast")):jQuery(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?jQuery(settings.prevButton).fadeOut("fast"):jQuery(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?jQuery(settings.nextButton).fadeOut("fast"):jQuery(settings.nextButton+","+settings.prevButton).fadeIn("slow")}),jQuery(settings.prevButton).click(function(s){var t=jQuery(settings.issuesDiv).find("li."+settings.issuesSelectedClass).index(),e=jQuery(settings.datesDiv+" li").eq(t).find("a").attr("href"),i=jQuery(settings.datesDiv+" li").eq(t+2).find("a").attr("href");if("horizontal"==settings.orientation){n=parseInt(jQuery(settings.issuesDiv).css("marginLeft").substring(0,jQuery(settings.issuesDiv).css("marginLeft").indexOf("px"))),parseInt(jQuery(settings.datesDiv).css("marginLeft").substring(0,jQuery(settings.datesDiv).css("marginLeft").indexOf("px")));0<=n?(jQuery(settings.issuesDiv).stop(),jQuery(settings.datesDiv+" li:first-child a").click()):jQuery(settings.issuesDiv).is(":animated")||(jQuery(settings.datesDiv+" li").eq(t-1).find("a").trigger("click"),console.log(t,e,i),jQuery(settings.prevButton).attr("href",e),jQuery(settings.nextButton).attr("href",i))}else if("vertical"==settings.orientation){var n;n=parseInt(jQuery(settings.issuesDiv).css("marginTop").substring(0,jQuery(settings.issuesDiv).css("marginTop").indexOf("px"))),parseInt(jQuery(settings.datesDiv).css("marginTop").substring(0,jQuery(settings.datesDiv).css("marginTop").indexOf("px")));0<=n?(jQuery(settings.issuesDiv).stop(),jQuery(settings.datesDiv+" li:first-child a").click()):jQuery(settings.issuesDiv).is(":animated")||(jQuery(settings.prevButton).attr("href",e),jQuery(settings.nextButton).attr("href",i),jQuery(settings.datesDiv+" li").eq(t-1).find("a").trigger("click"))}1==a?jQuery(settings.prevButton+","+settings.nextButton).fadeOut("fast"):2==a?jQuery(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?(jQuery(settings.prevButton).fadeOut("fast"),jQuery(settings.nextButton).fadeIn("fast")):jQuery(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)&&(jQuery(settings.nextButton).fadeOut("fast"),jQuery(settings.prevButton).fadeIn("fast")):jQuery(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?jQuery(settings.prevButton).fadeOut("fast"):jQuery(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?jQuery(settings.nextButton).fadeOut("fast"):jQuery(settings.nextButton+","+settings.prevButton).fadeIn("slow")}),"true"==settings.arrowKeys&&("horizontal"==settings.orientation?jQuery(document).keydown(function(s){39==s.keyCode&&jQuery(settings.nextButton).click(),37==s.keyCode&&jQuery(settings.prevButton).click()}):"vertical"==settings.orientation&&jQuery(document).keydown(function(s){40==s.keyCode&&jQuery(settings.nextButton).click(),38==s.keyCode&&jQuery(settings.prevButton).click()})),window.location.hash){var Q=window.location.hash.slice(1);jQuery(settings.datesDiv+" li").find("a[href=#"+Q+"]").trigger("click")}else jQuery(settings.datesDiv+" li").eq(settings.startAt-1).find("a").trigger("click");var f=null;if("true"==settings.autoPlay)f=setInterval("autoPlay()",settings.autoPlayPause);jQuery("a.toggle-autoplay").click(function(){"pause"===jQuery(this).data("toggle")?(clearInterval(f),jQuery("a.toggle-autoplay").html('<i class="fa fa-play" aria-hidden="true"></i><span class="sr-only">Play</span>').data("toggle","play")):"play"===jQuery(this).data("toggle")&&(f=setInterval("autoPlay()",settings.autoPlayPause),jQuery("a.toggle-autoplay").html('<i class="fa fa-pause" aria-hidden="true"></i><span class="sr-only">Pause</span>').data("toggle","pause"))})}})};